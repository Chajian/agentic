<mxfile host="app.diagrams.net" agent="Kiro" version="24.0.0" type="device" pages="3">
  <diagram id="page1-react-pattern" name="1. ReAct æ¨¡å¼">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <mxCell id="r-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1a1a1a;" value="ReAct æ¨¡å¼ (Reasoning + Acting)" vertex="1">
          <mxGeometry height="40" width="600" x="500" y="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-trad-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#E53935;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="180" width="700" x="50" y="80" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#E53935;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="âŒ ä¼ ç»Ÿ AIï¼šå•æ¬¡è°ƒç”¨" vertex="1">
          <mxGeometry height="30" width="200" x="60" y="90" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-user" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=12;fontStyle=1;" value="ç”¨æˆ·é—®é¢˜" vertex="1">
          <mxGeometry height="50" width="120" x="80" y="140" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-llm" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF;" value="LLM ç”Ÿæˆç­”æ¡ˆ" vertex="1">
          <mxGeometry height="50" width="150" x="250" y="140" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-result" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=12;fontStyle=1;" value="è¿”å›žç»“æžœ" vertex="1">
          <mxGeometry height="50" width="120" x="450" y="140" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-arr1" edge="1" parent="1" source="r-trad-user" target="r-trad-llm" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E53935;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-arr2" edge="1" parent="1" source="r-trad-llm" target="r-trad-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E53935;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r-trad-note" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;spacingLeft=10;" value="âš ï¸ é—®é¢˜ï¼šæ— æ³•ä½¿ç”¨å·¥å…·ï¼Œæ— æ³•å¤šæ­¥æŽ¨ç†" vertex="1">
          <mxGeometry height="30" width="300" x="80" y="210" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-react-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="550" width="1500" x="50" y="290" as="geometry"/>
        </mxCell>
        <mxCell id="r-react-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#43A047;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="âœ… ReAct æ¨¡å¼ï¼šæŽ¨ç† + è¡ŒåŠ¨å¾ªçŽ¯" vertex="1">
          <mxGeometry height="30" width="250" x="60" y="300" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-user-q" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;fontStyle=1;" value="ç”¨æˆ·é—®é¢˜" vertex="1">
          <mxGeometry height="50" width="120" x="80" y="360" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-iter1-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FFA000;strokeWidth=1;dashed=1;" value="" vertex="1">
          <mxGeometry height="150" width="1400" x="80" y="440" as="geometry"/>
        </mxCell>
        <mxCell id="r-iter1-label" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFA000;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="è¿­ä»£ 1" vertex="1">
          <mxGeometry height="25" width="70" x="90" y="450" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-i1-reason" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;" value="ðŸ§  æŽ¨ç†&#xa;LLM åˆ†æžï¼šéœ€è¦ä»€ä¹ˆå·¥å…·ï¼Ÿ" vertex="1">
          <mxGeometry height="60" width="180" x="100" y="490" as="geometry"/>
        </mxCell>
        <mxCell id="r-i1-decide" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#E65100;fontSize=11;fontStyle=1;fontColor=#FFFFFF;" value="å†³ç­–&#xa;è°ƒç”¨ get_boss_stats" vertex="1">
          <mxGeometry height="60" width="150" x="310" y="490" as="geometry"/>
        </mxCell>
        <mxCell id="r-i1-act" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=11;fontStyle=1;fontColor=#FFFFFF;" value="ðŸ”§ è¡ŒåŠ¨&#xa;æ‰§è¡Œå·¥å…·" vertex="1">
          <mxGeometry height="60" width="120" x="490" y="490" as="geometry"/>
        </mxCell>
        <mxCell id="r-i1-result" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=10;align=left;spacingLeft=10;fontFamily=Courier New;" value="ç»“æžœ:&#xa;{ total: 5,&#xa;  active: 3 }" vertex="1">
          <mxGeometry height="60" width="120" x="640" y="490" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-i1-arr1" edge="1" parent="1" source="r-i1-reason" target="r-i1-decide" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FFA000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r-i1-arr2" edge="1" parent="1" source="r-i1-decide" target="r-i1-act" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r-i1-arr3" edge="1" parent="1" source="r-i1-act" target="r-i1-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-iter2-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=1;dashed=1;" value="" vertex="1">
          <mxGeometry height="150" width="1400" x="80" y="620" as="geometry"/>
        </mxCell>
        <mxCell id="r-iter2-label" parent="1" style="text;html=1;strokeColor=none;fillColor=#1976D2;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="è¿­ä»£ 2" vertex="1">
          <mxGeometry height="25" width="70" x="90" y="630" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-i2-reason" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=11;fontStyle=1;" value="ðŸ§  æŽ¨ç†&#xa;LLM çœ‹åˆ°å·¥å…·ç»“æžœ" vertex="1">
          <mxGeometry height="60" width="180" x="100" y="670" as="geometry"/>
        </mxCell>
        <mxCell id="r-i2-decide" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196F3;strokeColor=#0D47A1;fontSize=11;fontStyle=1;fontColor=#FFFFFF;" value="å†³ç­–&#xa;ä»»åŠ¡å®Œæˆï¼Œç”Ÿæˆç­”æ¡ˆ" vertex="1">
          <mxGeometry height="60" width="180" x="310" y="670" as="geometry"/>
        </mxCell>
        <mxCell id="r-i2-final" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=10;align=left;spacingLeft=10;fontColor=#FFFFFF;fontStyle=1;" value="âœ… æœ€ç»ˆç­”æ¡ˆ&#xa;main ä¸–ç•Œå…±æœ‰ 5 ä¸ª Bossï¼Œ&#xa;å…¶ä¸­ 3 ä¸ªå¤„äºŽæ´»è·ƒçŠ¶æ€ã€‚" vertex="1">
          <mxGeometry height="60" width="220" x="520" y="670" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-i2-arr1" edge="1" parent="1" source="r-i2-reason" target="r-i2-decide" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r-i2-arr2" edge="1" parent="1" source="r-i2-decide" target="r-i2-final" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-flow-arr1" edge="1" parent="1" source="r-user-q" target="r-i1-reason" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="r-flow-arr2" edge="1" parent="1" source="r-i1-result" target="r-i2-reason" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;entryX=0.5;entryY=0;entryDx=0;entryDy=0;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="700" y="600"/>
              <mxPoint x="190" y="600"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="r-flow-label" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=10;fontColor=#616161;fontStyle=2;" value="å·¥å…·ç»“æžœåé¦ˆç»™ LLM" vertex="1">
          <mxGeometry height="20" width="140" x="350" y="590" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-benefit-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="120" width="600" x="850" y="360" as="geometry"/>
        </mxCell>
        <mxCell id="r-benefit-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#FBC02D;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="ðŸ’¡ ReAct çš„ä¼˜åŠ¿" vertex="1">
          <mxGeometry height="28" width="150" x="860" y="370" as="geometry"/>
        </mxCell>
        <mxCell id="r-benefit-list" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=11;fontColor=#5D4037;spacingLeft=10;" value="âœ… è‡ªä¸»å†³ç­– - LLM è‡ªå·±å†³å®šè°ƒç”¨å“ªäº›å·¥å…·&#xa;âœ… å¤šæ­¥æŽ¨ç† - å¯ä»¥æ‰§è¡Œå¤šä¸ªæ­¥éª¤å®Œæˆå¤æ‚ä»»åŠ¡&#xa;âœ… åŠ¨æ€è°ƒæ•´ - æ ¹æ®å·¥å…·ç»“æžœè°ƒæ•´åŽç»­è¡ŒåŠ¨&#xa;âœ… é”™è¯¯æ¢å¤ - å·¥å…·å¤±è´¥åŽå¯ä»¥å°è¯•å…¶ä»–æ–¹æ³•" vertex="1">
          <mxGeometry height="80" width="560" x="860" y="405" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-key-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="180" width="600" x="850" y="510" as="geometry"/>
        </mxCell>
        <mxCell id="r-key-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#0277BD;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="ðŸ”‘ å…³é”®æ¦‚å¿µ" vertex="1">
          <mxGeometry height="28" width="120" x="860" y="520" as="geometry"/>
        </mxCell>
        <mxCell id="r-key-reasoning" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="ðŸ§  Reasoning (æŽ¨ç†)&#xa;LLM åˆ†æžä»»åŠ¡ï¼Œå†³å®šéœ€è¦ä»€ä¹ˆå·¥å…·" vertex="1">
          <mxGeometry height="50" width="560" x="860" y="560" as="geometry"/>
        </mxCell>
        <mxCell id="r-key-acting" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="ðŸ”§ Acting (è¡ŒåŠ¨)&#xa;æ‰§è¡Œå·¥å…·ï¼ŒèŽ·å–å®žé™…æ•°æ®" vertex="1">
          <mxGeometry height="50" width="560" x="860" y="620" as="geometry"/>
        </mxCell>
        
        <mxCell id="r-note" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFECB3;align=left;verticalAlign=middle;fontSize=10;fontColor=#5D4037;spacingLeft=10;rounded=1;" value="ðŸ’¡ AgenticLoop å®žçŽ°äº†è¿™ä¸ªå¾ªçŽ¯ï¼Œæœ€å¤šè¿­ä»£ 10 æ¬¡ï¼ˆå¯é…ç½®ï¼‰" vertex="1">
          <mxGeometry height="40" width="400" x="850" y="720" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="page2-main-loop" name="2. ä¸»å¾ªçŽ¯æµç¨‹">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <mxCell id="m-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1a1a1a;" value="run() æ–¹æ³•ä¸»å¾ªçŽ¯æµç¨‹" vertex="1">
          <mxGeometry height="40" width="500" x="650" y="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-start" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=13;fontStyle=1;fontColor=#FFFFFF;" value="å¼€å§‹" vertex="1">
          <mxGeometry height="50" width="100" x="850" y="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-init" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;fontStyle=1;align=left;spacingLeft=10;" value="1ï¸âƒ£ åˆå§‹åŒ–çŠ¶æ€&#xa;iteration = 0&#xa;status = 'running'" vertex="1">
          <mxGeometry height="70" width="200" x="800" y="160" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-system" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;fontStyle=1;align=left;spacingLeft=10;" value="2ï¸âƒ£ æ·»åŠ ç³»ç»Ÿæç¤º&#xa;(å¦‚æžœæœ‰ systemPrompt)" vertex="1">
          <mxGeometry height="60" width="200" x="800" y="260" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-history" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;fontStyle=1;align=left;spacingLeft=10;" value="3ï¸âƒ£ æ³¨å…¥åŽ†å²æ¶ˆæ¯&#xa;(æ— çŠ¶æ€è®¾è®¡)" vertex="1">
          <mxGeometry height="60" width="200" x="800" y="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-user-msg" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;fontStyle=1;align=left;spacingLeft=10;" value="4ï¸âƒ£ æ·»åŠ ç”¨æˆ·æ¶ˆæ¯" vertex="1">
          <mxGeometry height="50" width="200" x="800" y="440" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-loop-start" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFA000;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF;" value="ä¸»å¾ªçŽ¯å¼€å§‹" vertex="1">
          <mxGeometry height="50" width="120" x="840" y="520" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-check-iter" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;fontSize=11;fontStyle=1;" value="iteration >=&#xa;maxIterations?" vertex="1">
          <mxGeometry height="80" width="140" x="830" y="600" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-max-iter" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=11;fontStyle=1;" value="status =&#xa;'max_iterations'" vertex="1">
          <mxGeometry height="50" width="130" x="1050" y="615" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-check-abort" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;fontSize=11;fontStyle=1;" value="abortSignal&#xa;.aborted?" vertex="1">
          <mxGeometry height="80" width="140" x="830" y="710" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-cancelled" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=11;fontStyle=1;" value="status =&#xa;'cancelled'" vertex="1">
          <mxGeometry height="50" width="130" x="1050" y="725" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-exec-iter" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF;" value="5ï¸âƒ£ æ‰§è¡Œä¸€æ¬¡è¿­ä»£&#xa;executeIteration()" vertex="1">
          <mxGeometry height="60" width="200" x="800" y="820" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-iter-inc" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;" value="iteration++" vertex="1">
          <mxGeometry height="40" width="120" x="840" y="910" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-check-status" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;fontSize=11;fontStyle=1;" value="status ==&#xa;'running'?" vertex="1">
          <mxGeometry height="80" width="140" x="830" y="980" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-loop-end" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFA000;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF;" value="å¾ªçŽ¯ç»“æŸ" vertex="1">
          <mxGeometry height="50" width="120" x="1050" y="995" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-build-result" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=12;fontStyle=1;" value="6ï¸âƒ£ æž„å»ºç»“æžœ&#xa;buildResult()" vertex="1">
          <mxGeometry height="60" width="200" x="800" y="1090" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-end" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=13;fontStyle=1;fontColor=#FFFFFF;" value="è¿”å›žç»“æžœ" vertex="1">
          <mxGeometry height="50" width="100" x="850" y="1170" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-arr1" edge="1" parent="1" source="m-start" target="m-init" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr2" edge="1" parent="1" source="m-init" target="m-system" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr3" edge="1" parent="1" source="m-system" target="m-history" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr4" edge="1" parent="1" source="m-history" target="m-user-msg" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr5" edge="1" parent="1" source="m-user-msg" target="m-loop-start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr6" edge="1" parent="1" source="m-loop-start" target="m-check-iter" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FFA000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr7" edge="1" parent="1" source="m-check-iter" target="m-max-iter" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E53935;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr7-label" parent="m-arr7" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#E53935;fontStyle=1;" value="æ˜¯" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr8" edge="1" parent="1" source="m-check-iter" target="m-check-abort" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr8-label" parent="m-arr8" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#43A047;fontStyle=1;" value="å¦" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr9" edge="1" parent="1" source="m-check-abort" target="m-cancelled" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E53935;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr9-label" parent="m-arr9" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#E53935;fontStyle=1;" value="æ˜¯" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr10" edge="1" parent="1" source="m-check-abort" target="m-exec-iter" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr10-label" parent="m-arr10" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#43A047;fontStyle=1;" value="å¦" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr11" edge="1" parent="1" source="m-exec-iter" target="m-iter-inc" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr12" edge="1" parent="1" source="m-iter-inc" target="m-check-status" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr13" edge="1" parent="1" source="m-check-status" target="m-loop-end" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E53935;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr13-label" parent="m-arr13" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#E53935;fontStyle=1;" value="å¦" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr14" edge="1" parent="1" source="m-check-status" target="m-check-iter" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="700" y="1020"/>
              <mxPoint x="700" y="640"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr14-label" parent="m-arr14" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#43A047;fontStyle=1;" value="æ˜¯ (ç»§ç»­å¾ªçŽ¯)" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint x="-10" y="-10" as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr15" edge="1" parent="1" source="m-max-iter" target="m-loop-end" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#E53935;entryX=1;entryY=0.5;entryDx=0;entryDy=0;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1200" y="640"/>
              <mxPoint x="1200" y="1020"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr16" edge="1" parent="1" source="m-cancelled" target="m-loop-end" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#E53935;entryX=1;entryY=0.5;entryDx=0;entryDy=0;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1200" y="750"/>
              <mxPoint x="1200" y="1020"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="m-arr17" edge="1" parent="1" source="m-loop-end" target="m-build-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="m-arr18" edge="1" parent="1" source="m-build-result" target="m-end" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-iter-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FFA000;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="300" width="450" x="1280" y="80" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFA000;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="executeIteration() å•æ¬¡è¿­ä»£" vertex="1">
          <mxGeometry height="28" width="240" x="1290" y="90" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-step1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="1. èŽ·å–å·¥å…·å®šä¹‰" vertex="1">
          <mxGeometry height="35" width="420" x="1290" y="130" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-step2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="2. è°ƒç”¨ LLM (å¸¦è¶…æ—¶å’Œå–æ¶ˆæ”¯æŒ)" vertex="1">
          <mxGeometry height="35" width="420" x="1290" y="175" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-step3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="3. æ£€æŸ¥ LLM æ˜¯å¦è¦è°ƒç”¨å·¥å…·" vertex="1">
          <mxGeometry height="35" width="420" x="1290" y="220" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-step4a" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="æœ‰ toolCalls â†’ æ‰§è¡Œå·¥å…· â†’ ç»§ç»­å¾ªçŽ¯" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="265" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-step4b" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=10;fontStyle=1;align=left;spacingLeft=10;fontColor=#FFFFFF;" value="æ—  toolCalls â†’ ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ â†’ ç»“æŸ" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="305" as="geometry"/>
        </mxCell>
        <mxCell id="m-iter-note" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontColor=#E65100;spacingLeft=10;fontStyle=2;" value="ðŸ’¡ å…³é”®å†³ç­–ç‚¹ï¼šLLM å†³å®šæ˜¯ç»§ç»­è°ƒç”¨å·¥å…·è¿˜æ˜¯ç»“æŸ" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="345" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-status-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="200" width="450" x="1280" y="410" as="geometry"/>
        </mxCell>
        <mxCell id="m-status-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#43A047;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="å¾ªçŽ¯ç»“æŸçŠ¶æ€" vertex="1">
          <mxGeometry height="28" width="140" x="1290" y="420" as="geometry"/>
        </mxCell>
        <mxCell id="m-status-completed" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="âœ… completed - LLM ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="460" as="geometry"/>
        </mxCell>
        <mxCell id="m-status-max" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="âš ï¸ max_iterations - è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="500" as="geometry"/>
        </mxCell>
        <mxCell id="m-status-cancelled" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="ðŸš« cancelled - ç”¨æˆ·å–æ¶ˆæ“ä½œ" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="540" as="geometry"/>
        </mxCell>
        <mxCell id="m-status-error" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="âŒ error - å‘ç”Ÿé”™è¯¯" vertex="1">
          <mxGeometry height="30" width="420" x="1290" y="580" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-config-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="180" width="450" x="1280" y="640" as="geometry"/>
        </mxCell>
        <mxCell id="m-config-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#0277BD;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="é…ç½®å‚æ•°" vertex="1">
          <mxGeometry height="28" width="100" x="1290" y="650" as="geometry"/>
        </mxCell>
        <mxCell id="m-config-max" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontSize=10;fontStyle=1;align=left;spacingLeft=10;fontFamily=Courier New;" value="maxIterations: 10 (é»˜è®¤)" vertex="1">
          <mxGeometry height="28" width="420" x="1290" y="690" as="geometry"/>
        </mxCell>
        <mxCell id="m-config-timeout" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontSize=10;fontStyle=1;align=left;spacingLeft=10;fontFamily=Courier New;" value="iterationTimeout: 30000ms (é»˜è®¤)" vertex="1">
          <mxGeometry height="28" width="420" x="1290" y="728" as="geometry"/>
        </mxCell>
        <mxCell id="m-config-parallel" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;fontSize=10;fontStyle=1;align=left;spacingLeft=10;fontFamily=Courier New;" value="parallelToolCalls: true (é»˜è®¤)" vertex="1">
          <mxGeometry height="28" width="420" x="1290" y="766" as="geometry"/>
        </mxCell>
        
        <mxCell id="m-example-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="340" width="450" x="1280" y="850" as="geometry"/>
        </mxCell>
        <mxCell id="m-example-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#FBC02D;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="ðŸ’¡ ç¤ºä¾‹ï¼šç®€å•æŸ¥è¯¢" vertex="1">
          <mxGeometry height="28" width="160" x="1290" y="860" as="geometry"/>
        </mxCell>
        <mxCell id="m-example-text" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#5D4037;spacingLeft=10;fontFamily=Courier New;" value="ç”¨æˆ·: &quot;æŸ¥è¯¢ main ä¸–ç•Œçš„ Boss ç»Ÿè®¡&quot;&#xa;&#xa;è¿­ä»£ 1:&#xa;  LLM è¾“å…¥: [system, user]&#xa;  LLM è¾“å‡º: toolCalls = [{&#xa;    name: 'get_boss_stats',&#xa;    arguments: { world: 'main' }&#xa;  }]&#xa;  æ‰§è¡Œå·¥å…·: get_boss_stats()&#xa;  å·¥å…·ç»“æžœ: { total: 5, active: 3 }&#xa;  status: 'running' (ç»§ç»­)&#xa;&#xa;è¿­ä»£ 2:&#xa;  LLM è¾“å…¥: [system, user, assistant, tool]&#xa;  LLM è¾“å‡º: content = &quot;main ä¸–ç•Œå…±æœ‰ 5 ä¸ª&#xa;             Bossï¼Œå…¶ä¸­ 3 ä¸ªå¤„äºŽæ´»è·ƒçŠ¶æ€ã€‚&quot;&#xa;  status: 'completed' (ç»“æŸ)&#xa;&#xa;è¿”å›ž: &quot;main ä¸–ç•Œå…±æœ‰ 5 ä¸ª Bossï¼Œ&#xa;      å…¶ä¸­ 3 ä¸ªå¤„äºŽæ´»è·ƒçŠ¶æ€ã€‚&quot;" vertex="1">
          <mxGeometry height="300" width="420" x="1290" y="900" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="page3-tool-execution" name="3. å·¥å…·æ‰§è¡Œ">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <mxCell id="t-title" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1a1a1a;" value="å·¥å…·æ‰§è¡Œå’Œé”™è¯¯å¤„ç†" vertex="1">
          <mxGeometry height="40" width="500" x="650" y="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-parallel-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="350" width="700" x="50" y="80" as="geometry"/>
        </mxCell>
        <mxCell id="t-parallel-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#43A047;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="å¹¶è¡Œå·¥å…·æ‰§è¡Œ (parallelToolCalls: true)" vertex="1">
          <mxGeometry height="30" width="320" x="60" y="90" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-p-llm" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF;" value="LLM è¿”å›ž&#xa;3 ä¸ªå·¥å…·è°ƒç”¨" vertex="1">
          <mxGeometry height="60" width="140" x="80" y="150" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-p-tool1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=11;fontStyle=1;fontColor=#FFFFFF;" value="å·¥å…· 1&#xa;get_boss_stats" vertex="1">
          <mxGeometry height="60" width="130" x="80" y="250" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-tool2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=11;fontStyle=1;fontColor=#FFFFFF;" value="å·¥å…· 2&#xa;list_worlds" vertex="1">
          <mxGeometry height="60" width="130" x="240" y="250" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-tool3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=11;fontStyle=1;fontColor=#FFFFFF;" value="å·¥å…· 3&#xa;get_player_count" vertex="1">
          <mxGeometry height="60" width="130" x="400" y="250" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-p-result" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=11;fontStyle=1;" value="Promise.all()&#xa;ç­‰å¾…æ‰€æœ‰å·¥å…·å®Œæˆ" vertex="1">
          <mxGeometry height="60" width="450" x="80" y="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-p-arr1" edge="1" parent="1" source="t-p-llm" target="t-p-tool1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-arr2" edge="1" parent="1" source="t-p-llm" target="t-p-tool2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-arr3" edge="1" parent="1" source="t-p-llm" target="t-p-tool3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#43A047;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-arr4" edge="1" parent="1" source="t-p-tool1" target="t-p-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-arr5" edge="1" parent="1" source="t-p-tool2" target="t-p-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-p-arr6" edge="1" parent="1" source="t-p-tool3" target="t-p-result" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#616161;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-p-note" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFF9C4;align=left;verticalAlign=middle;fontSize=10;fontColor=#5D4037;spacingLeft=10;rounded=1;" value="âœ… ä¼˜åŠ¿ï¼šé€Ÿåº¦å¿«ï¼Œé€‚åˆç‹¬ç«‹çš„å·¥å…·è°ƒç”¨" vertex="1">
          <mxGeometry height="30" width="300" x="560" y="250" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-seq-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FFA000;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="350" width="700" x="50" y="460" as="geometry"/>
        </mxCell>
        <mxCell id="t-seq-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFA000;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="é¡ºåºå·¥å…·æ‰§è¡Œ (parallelToolCalls: false)" vertex="1">
          <mxGeometry height="30" width="340" x="60" y="470" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-s-llm" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#E65100;fontSize=12;fontStyle=1;fontColor=#FFFFFF;" value="LLM è¿”å›ž&#xa;3 ä¸ªå·¥å…·è°ƒç”¨" vertex="1">
          <mxGeometry height="60" width="140" x="80" y="530" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-s-tool1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;" value="å·¥å…· 1&#xa;get_boss_stats" vertex="1">
          <mxGeometry height="60" width="130" x="260" y="530" as="geometry"/>
        </mxCell>
        <mxCell id="t-s-tool2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;" value="å·¥å…· 2&#xa;list_worlds" vertex="1">
          <mxGeometry height="60" width="130" x="420" y="530" as="geometry"/>
        </mxCell>
        <mxCell id="t-s-tool3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=11;fontStyle=1;" value="å·¥å…· 3&#xa;get_player_count" vertex="1">
          <mxGeometry height="60" width="130" x="580" y="530" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-s-arr1" edge="1" parent="1" source="t-s-llm" target="t-s-tool1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FFA000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-s-arr1-label" parent="t-s-arr1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#E65100;fontStyle=1;" value="1" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="t-s-arr2" edge="1" parent="1" source="t-s-tool1" target="t-s-tool2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FFA000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-s-arr2-label" parent="t-s-arr2" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#E65100;fontStyle=1;" value="2" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="t-s-arr3" edge="1" parent="1" source="t-s-tool2" target="t-s-tool3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FFA000;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-s-arr3-label" parent="t-s-arr3" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#E65100;fontStyle=1;" value="3" vertex="1" connectable="0">
          <mxGeometry x="-0.3" relative="1" as="geometry">
            <mxPoint as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="t-s-timeline" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=10;fontColor=#E65100;fontStyle=2;" value="æ—¶é—´ â†’" vertex="1">
          <mxGeometry height="20" width="60" x="650" y="610" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-s-note" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFF9C4;align=left;verticalAlign=middle;fontSize=10;fontColor=#5D4037;spacingLeft=10;rounded=1;" value="âœ… ä¼˜åŠ¿ï¼šæ›´å®‰å…¨ï¼Œä¸€ä¸ªå¤±è´¥ä¸å½±å“å…¶ä»–&#xa;âš ï¸ åŠ£åŠ¿ï¼šé€Ÿåº¦æ…¢ï¼Œæ€»æ—¶é—´ = æ‰€æœ‰å·¥å…·æ—¶é—´ä¹‹å’Œ" vertex="1">
          <mxGeometry height="50" width="320" x="80" y="640" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-s-example" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;fontColor=#5D4037;spacingLeft=10;fontFamily=Courier New;" value="// é¡ºåºæ‰§è¡Œä»£ç &#xa;for (const toolCall of toolCalls) {&#xa;  const result = await executeTool(toolCall);&#xa;  results.push(result);&#xa;}" vertex="1">
          <mxGeometry height="80" width="320" x="80" y="710" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-s-compare" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;strokeWidth=2;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="â±ï¸ æ€§èƒ½å¯¹æ¯”&#xa;å¹¶è¡Œï¼šmax(t1, t2, t3) = å‡è®¾éƒ½æ˜¯ 1sï¼Œæ€»å…± 1s&#xa;é¡ºåºï¼št1 + t2 + t3 = 1s + 1s + 1s = 3s" vertex="1">
          <mxGeometry height="70" width="320" x="430" y="640" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-timeout-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#E53935;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="380" width="700" x="800" y="80" as="geometry"/>
        </mxCell>
        <mxCell id="t-timeout-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#E53935;align=center;verticalAlign=middle;fontSize=14;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="è¶…æ—¶å’Œå–æ¶ˆæœºåˆ¶" vertex="1">
          <mxGeometry height="30" width="160" x="810" y="90" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-timeout-flow" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="callLLMWithTimeout() æµç¨‹" vertex="1">
          <mxGeometry height="30" width="660" x="810" y="140" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-t-step1" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="1. åˆ›å»º AbortController" vertex="1">
          <mxGeometry height="30" width="300" x="820" y="190" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-t-step2" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="2. è®¾ç½®è¶…æ—¶å®šæ—¶å™¨ setTimeout()" vertex="1">
          <mxGeometry height="30" width="300" x="820" y="230" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-t-step3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE082;strokeColor=#FFA000;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="3. ç›‘å¬å¤–éƒ¨å–æ¶ˆä¿¡å· abortSignal" vertex="1">
          <mxGeometry height="30" width="300" x="820" y="270" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-t-step4" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#2E7D32;fontSize=10;fontStyle=1;align=left;spacingLeft=10;fontColor=#FFFFFF;" value="4. è°ƒç”¨ LLM (ä¼ å…¥ç»„åˆçš„ signal)" vertex="1">
          <mxGeometry height="30" width="300" x="820" y="310" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-t-step5" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="5. finally å—æ¸…ç†èµ„æº" vertex="1">
          <mxGeometry height="30" width="300" x="820" y="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-t-code" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=9;fontColor=#5D4037;spacingLeft=5;fontFamily=Courier New;" value="const controller = new AbortController();&#xa;&#xa;// è¶…æ—¶&#xa;const timeoutId = setTimeout(&#xa;  () => controller.abort(),&#xa;  timeout&#xa;);&#xa;&#xa;// å¤–éƒ¨å–æ¶ˆ&#xa;const onAbort = () => controller.abort();&#xa;abortSignal?.addEventListener('abort', onAbort);&#xa;&#xa;try {&#xa;  return await llm.generate(..., {&#xa;    abortSignal: controller.signal&#xa;  });&#xa;} finally {&#xa;  clearTimeout(timeoutId);&#xa;  abortSignal?.removeEventListener('abort', onAbort);&#xa;}" vertex="1">
          <mxGeometry height="280" width="350" x="1140" y="140" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-cancel-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="180" width="340" x="810" y="480" as="geometry"/>
        </mxCell>
        <mxCell id="t-cancel-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#1976D2;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="å–æ¶ˆæµç¨‹" vertex="1">
          <mxGeometry height="28" width="100" x="820" y="490" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-c-user" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=10;fontStyle=1;" value="ç”¨æˆ·ç‚¹å‡»å–æ¶ˆ" vertex="1">
          <mxGeometry height="30" width="120" x="820" y="530" as="geometry"/>
        </mxCell>
        <mxCell id="t-c-abort" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=10;fontStyle=1;" value="abortController&#xa;.abort()" vertex="1">
          <mxGeometry height="40" width="120" x="820" y="575" as="geometry"/>
        </mxCell>
        <mxCell id="t-c-detect" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196F3;strokeColor=#0D47A1;fontSize=10;fontStyle=1;fontColor=#FFFFFF;" value="AgenticLoop&#xa;æ£€æµ‹åˆ° aborted" vertex="1">
          <mxGeometry height="40" width="120" x="820" y="630" as="geometry"/>
        </mxCell>
        <mxCell id="t-c-status" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=10;fontStyle=1;" value="status =&#xa;'cancelled'" vertex="1">
          <mxGeometry height="40" width="100" x="1020" y="630" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-c-arr1" edge="1" parent="1" source="t-c-user" target="t-c-abort" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-c-arr2" edge="1" parent="1" source="t-c-abort" target="t-c-detect" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="t-c-arr3" edge="1" parent="1" source="t-c-detect" target="t-c-status" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E53935;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-error-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FFA000;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="180" width="340" x="1160" y="480" as="geometry"/>
        </mxCell>
        <mxCell id="t-error-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#FFA000;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="é”™è¯¯å¤„ç†" vertex="1">
          <mxGeometry height="28" width="100" x="1170" y="490" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-e-continue" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#43A047;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="âœ… continueOnError: true (é»˜è®¤)&#xa;å·¥å…·å¤±è´¥åŽç»§ç»­æ‰§è¡Œå…¶ä»–å·¥å…·" vertex="1">
          <mxGeometry height="50" width="310" x="1170" y="530" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-e-stop" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#E53935;fontSize=10;fontStyle=1;align=left;spacingLeft=10;" value="âŒ continueOnError: false&#xa;å·¥å…·å¤±è´¥åŽç«‹å³åœæ­¢" vertex="1">
          <mxGeometry height="50" width="310" x="1170" y="595" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-summary-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="150" width="700" x="800" y="690" as="geometry"/>
        </mxCell>
        <mxCell id="t-summary-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#FBC02D;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="ðŸ’¡ å…³é”®ç‰¹æ€§æ€»ç»“" vertex="1">
          <mxGeometry height="28" width="160" x="810" y="700" as="geometry"/>
        </mxCell>
        <mxCell id="t-summary-list" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=11;fontColor=#5D4037;spacingLeft=10;" value="âœ… å¹¶è¡Œæ‰§è¡Œ - å¤šä¸ªå·¥å…·å¯ä»¥åŒæ—¶è°ƒç”¨ï¼Œæé«˜é€Ÿåº¦&#xa;âœ… è¶…æ—¶æŽ§åˆ¶ - é˜²æ­¢å•æ¬¡è¿­ä»£è€—æ—¶è¿‡é•¿ (é»˜è®¤ 30s)&#xa;âœ… å–æ¶ˆæ”¯æŒ - ç”¨æˆ·å¯ä»¥éšæ—¶å–æ¶ˆæ“ä½œ (AbortController)&#xa;âœ… é”™è¯¯æ¢å¤ - å·¥å…·å¤±è´¥åŽå¯ä»¥ç»§ç»­æ‰§è¡Œ (continueOnError)&#xa;âœ… èµ„æºæ¸…ç† - finally å—ç¡®ä¿å®šæ—¶å™¨å’Œç›‘å¬å™¨è¢«æ¸…ç†" vertex="1">
          <mxGeometry height="100" width="660" x="810" y="735" as="geometry"/>
        </mxCell>
        
        <mxCell id="t-note-box" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;strokeWidth=2;" value="" vertex="1">
          <mxGeometry height="150" width="700" x="800" y="870" as="geometry"/>
        </mxCell>
        <mxCell id="t-note-title" parent="1" style="text;html=1;strokeColor=none;fillColor=#43A047;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#FFFFFF;rounded=1;" value="ðŸŽ¯ æœ€ä½³å®žè·µ" vertex="1">
          <mxGeometry height="28" width="120" x="810" y="880" as="geometry"/>
        </mxCell>
        <mxCell id="t-note-list" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=11;fontColor=#2E7D32;spacingLeft=10;" value="1. ç‹¬ç«‹å·¥å…·ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ (parallelToolCalls: true)&#xa;2. æœ‰ä¾èµ–å…³ç³»çš„å·¥å…·ä½¿ç”¨é¡ºåºæ‰§è¡Œ (parallelToolCalls: false)&#xa;3. è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ (æ ¹æ®å·¥å…·å¤æ‚åº¦è°ƒæ•´)&#xa;4. æä¾›å–æ¶ˆæŒ‰é’®ç»™ç”¨æˆ· (ä¼ å…¥ abortSignal)&#xa;5. å·¥å…·å¤±è´¥æ—¶è¿”å›žæœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯ (LLM ä¼šçœ‹åˆ°)" vertex="1">
          <mxGeometry height="100" width="660" x="810" y="915" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
